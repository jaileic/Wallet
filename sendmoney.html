<!DOCTYPE html>
<html>
<head>
  <title>Wallet - Enviar Dinero</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css">
  <style>
body { background: linear-gradient(90deg,rgb(174, 238, 226) 0%, rgb(180, 173, 247) 50%, rgb(234, 193, 251) 100%);; padding: 40px;}
    .container-fluid { max-width: 400px; margin: 0 auto; background: rgb(255, 255, 255) ;border-radius: 6px;box-shadow: 0 5px 10px rgba(0,0,0,0.1);}
  </style>
</head>
<body>
  <div class="container-fluid">
    <div class="p-3 mb-2 bg-info text-black">
    <h2>Enviar Dinero</h2>
    
    </div>
    <div class="p-3 mb-2">
    <form>
      <div class="form-group">
        <label for="searchContact"><strong>Buscar en la agenda de transferencias:</strong></label>
        <input type="text" class="form-control" id="searchContact" placeholder="Buscar contacto">
      </div>
      <br>
      <button type="button" id="btnNuevoContacto" class="btn btn-info btn-md">Agregar nuevo contacto</button>
      <h3>Contactos</h3>
  <ul id="contactList" class="list-group">
      <button type="button" id="btnEnviar" class="btn btn-info btn-lg btn-block">Enviar dinero</button>
    </form>
    <a href="menu.html" class="btn btn-outline-info btn-lg btn-block">Volver al Men√∫ Principal</a>
<div class="modal fade" id="modalContacto" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">

      <div class="modal-header bg-info text-white">
        <h5 class="modal-title">Agregar nuevo contacto</h5>
        <button type="button" class="close" data-dismiss="modal">
          <span>&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form id="formContacto">
          <input class="form-control mb-2" id="nombre" placeholder="Nombre y apellido" required>
          <input class="form-control mb-2" id="cbu" placeholder="CBU" required>
          <input class="form-control mb-2" id="alias" placeholder="Alias" required>
          <input class="form-control mb-2" id="banco" placeholder="Banco" required>
          <button type="submit" class="btn btn-info btn-block">Guardar contacto</button>
        </form>
      </div>

    </div>
  </div>
</div>
  </div>
      <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
       <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
       <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>


<script>
document.body.insertAdjacentHTML("beforeend", modalHTML);
</script>
<script>
const contactList = document.getElementById("contactList");

document.getElementById("btnNuevoContacto").addEventListener("click", () => {
  $("#modalContacto").modal("show");
});

document.addEventListener("submit", function (e) {
  if (e.target.id !== "formContacto") return;

  e.preventDefault();

  const contacto = {
    nombre: nombre.value,
    cbu: cbu.value,
    alias: alias.value,
    banco: banco.value
  };

  const contactos = JSON.parse(localStorage.getItem("contactos")) || [];
  contactos.push(contacto);
  localStorage.setItem("contactos", JSON.stringify(contactos));

  agregarContacto(contacto);
  e.target.reset();
  $("#modalContacto").modal("hide");
});

function agregarContacto(c) {
  const li = document.createElement("li");
  li.className = "list-group-item";
  li.innerHTML = `
    <input type="radio" name="contacto">
    <strong>${c.nombre}</strong><br>
    CBU: ${c.cbu} | Alias: ${c.alias} | Banco: ${c.banco}
  `;
  contactList.appendChild(li);
}

window.addEventListener("load", () => {
  const contactos = JSON.parse(localStorage.getItem("contactos")) || [];
  contactos.forEach(agregarContacto);
});
</script>
<script>
document.getElementById("btnEnviar").addEventListener("click", () => {
  const seleccionado = document.querySelector('input[name="contacto"]:checked');

  if (!seleccionado) {
    alert("Selecciona un contacto ‚ùó");
    return;
  }

  let saldo = parseInt(localStorage.getItem("saldo")) || 60000;
  const monto = 5000;

  if (saldo < monto) {
    alert("Saldo insuficiente ‚ùå");
    return;
  }

  saldo -= monto;
  localStorage.setItem("saldo", saldo);

  alert("Dinero enviado con √©xito üí∏\nNuevo saldo: $" + saldo);
});
</script>
<script>
$('#searchContact').on('keyup', function () {
  const texto = $(this).val().toLowerCase();

  $('#contactList li').filter(function () {
    $(this).toggle($(this).text().toLowerCase().includes(texto));
  });
});

$('input[name="contacto"]').change(function () {
  $('#btnEnviar').show();
});

$('#btnEnviar').click(function () {
  $('#contactList').after(`
    <div class="alert alert-success mt-3">
      Env√≠o realizado con √©xito üí∏
    </div>
  `);
});
</script>

</body>
</html>
